<!doctype html><html lang=en><head><title>Faça melhor uso do comando ls! :: unixwmbr</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Apresentação   Frequentemente estamos lidando com arquivos e diretórios no nosso sistema, seja movendo, copiando, removendo, listando, etc. A primeiríssima coisa que faço ao entrar num diretório é rodar ls para ver o que tem dentro, é automático!
  O problema   Mas e quando estamos num diretório cheio de arquivos e subdiretórios? Logo me imagino rodando ls, tomando uma enxurrada de coisas como output e então rodando novamente mas passando o output para o less."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://unixwmbr.github.io/posts/faca-melhor-uso-do-comando-ls/><link rel=stylesheet href=https://unixwmbr.github.io/assets/style.css><link rel=apple-touch-icon href=https://unixwmbr.github.io/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=https://unixwmbr.github.io/img/favicon/orange.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Faça melhor uso do comando ls!"><meta property="og:description" content="Apresentação   Frequentemente estamos lidando com arquivos e diretórios no nosso sistema, seja movendo, copiando, removendo, listando, etc. A primeiríssima coisa que faço ao entrar num diretório é rodar ls para ver o que tem dentro, é automático!
  O problema   Mas e quando estamos num diretório cheio de arquivos e subdiretórios? Logo me imagino rodando ls, tomando uma enxurrada de coisas como output e então rodando novamente mas passando o output para o less."><meta property="og:url" content="https://unixwmbr.github.io/posts/faca-melhor-uso-do-comando-ls/"><meta property="og:site_name" content="unixwmbr"><meta property="og:image" content="https://unixwmbr.github.io/img/favicon/orange.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2022-05-22 00:00:00 +0000 UTC"></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=https://unixwmbr.github.io/><div class=logo>Terminal</div></a></div></div></header><div class=content><div class=post><h1 class=post-title><a href=https://unixwmbr.github.io/posts/faca-melhor-uso-do-comando-ls/>Faça melhor uso do comando ls!</a></h1><div class=post-meta><span class=post-date>2022-05-22
[Updated: 2022-05-22]</span>
<span class=post-author>:: crzjp</span></div><div class=table-of-contents><h2>Tabela de Conteúdo</h2><nav id=TableOfContents><ul><li><a href=#headline-1>Apresentação</a></li><li><a href=#headline-2>O problema</a></li><li><a href=#headline-3>A solução</a></li><li><a href=#headline-4>Config</a><ul><li><a href=#headline-5>ls</a></li><li><a href=#headline-6>less</a></li></ul></li><li><a href=#headline-7>Final</a></li></ul></nav></div><div class=post-content><div><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>Apresentação</h2><div id=outline-text-headline-1 class=outline-text-2><p>Frequentemente estamos lidando com arquivos e diretórios no nosso sistema, seja movendo, copiando, removendo, listando, etc.
A primeiríssima coisa que faço ao entrar num diretório é rodar <code class=verbatim>ls</code> para ver o que tem dentro, é automático!</p></div></div><div id=outline-container-headline-2 class=outline-2><h2 id=headline-2>O problema</h2><div id=outline-text-headline-2 class=outline-text-2><p>Mas e quando estamos num diretório cheio de arquivos e subdiretórios? Logo me imagino rodando <code class=verbatim>ls</code>, tomando uma enxurrada de coisas
como output e então rodando novamente mas passando o output para o <code class=verbatim>less</code>.</p><div class="src src-sh"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>  <span style=color:#75715e># Aqui tomamos um BOOM de informações</span>
</span></span><span style=display:flex><span>  ls -a
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># E aqui perdemos de 2 a 5 segundos de nossas</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># vidas rodando novamente, dessa vez com o less</span>
</span></span><span style=display:flex><span>  ls -a | less</span></span></code></pre></div></div></div></div><div id=outline-container-headline-3 class=outline-2><h2 id=headline-3>A solução</h2><div id=outline-text-headline-3 class=outline-text-2><p>Invés de rodar tal comando 2 vezes, por quê não rodar <code class=verbatim>ls</code> + <code class=verbatim>less</code> <strong>sempre</strong>?
Para isso, necessitamos de algumas linhas de config para tudo funcionar lindamente.</p></div></div><div id=outline-container-headline-4 class=outline-2><h2 id=headline-4>Config</h2><div id=outline-text-headline-4 class=outline-text-2><div id=outline-container-headline-5 class=outline-3><h3 id=headline-5>ls</h3><div id=outline-text-headline-5 class=outline-text-3><p>Para o <code class=verbatim>ls</code>, criaremos uma função no rc do nosso shell:</p><div class="src src-sh"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>  ls<span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>      export COLUMNS
</span></span><span style=display:flex><span>      command ls -AC --color<span style=color:#f92672>=</span>always --group-directories-first <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span> | less
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span></span></span></code></pre></div></div><ul><li><code class=verbatim>export COLUMNS</code>: "lembre" ao <code class=verbatim>ls</code> e ao <code class=verbatim>less</code> o número de colunas, assim aproveitando melhor o espaçamento na janela do terminal.</li><li><code class=verbatim>command</code>: garantindo que não entre em conflito com algum alias ou coisa do tipo.</li><li><code class=verbatim>-A</code>: mostre tudo, exceto <code class=verbatim>.</code> e <code class=verbatim>..</code>.</li><li><code class=verbatim>-C</code>: liste em colunas verticais.</li><li><code class=verbatim>--color=always</code>: garantindo que sempre mostre as cores.</li><li><code class=verbatim>--group-directories-first</code>: mostre primeiro os diretórios.</li><li><code class=verbatim>"$@"</code>: aqui é onde vai ser o diretorio a ser passado, podendo ser mais de um (ou nenhum para o diretorio atual).</li><li><code class=verbatim>| less</code>: passando o output para o <code class=verbatim>less</code>.</li></ul></div></div><div id=outline-container-headline-6 class=outline-3><h3 id=headline-6>less</h3><div id=outline-text-headline-6 class=outline-text-3><p>Para o <code class=verbatim>less</code>, iremos definir algumas variáveis no profile do nosso shell.</p><div class="src src-sh"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>  export LESS<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;-F -R -J -M -W -X&#39;</span>
</span></span><span style=display:flex><span>  export LESSHISTFILE<span style=color:#f92672>=</span>/dev/null
</span></span><span style=display:flex><span>  export LESS_TERMCAP_mb<span style=color:#f92672>=</span><span style=color:#e6db74>$&#39;\033[1;31m&#39;</span>
</span></span><span style=display:flex><span>  export LESS_TERMCAP_md<span style=color:#f92672>=</span><span style=color:#e6db74>$&#39;\033[1;36m&#39;</span>
</span></span><span style=display:flex><span>  export LESS_TERMCAP_me<span style=color:#f92672>=</span><span style=color:#e6db74>$&#39;\033[0m&#39;</span>
</span></span><span style=display:flex><span>  export LESS_TERMCAP_so<span style=color:#f92672>=</span><span style=color:#e6db74>$&#39;\033[01;7;34m&#39;</span>
</span></span><span style=display:flex><span>  export LESS_TERMCAP_se<span style=color:#f92672>=</span><span style=color:#e6db74>$&#39;\033[0m&#39;</span>
</span></span><span style=display:flex><span>  export LESS_TERMCAP_us<span style=color:#f92672>=</span><span style=color:#e6db74>$&#39;\033[1;32m&#39;</span>
</span></span><span style=display:flex><span>  export LESS_TERMCAP_ue<span style=color:#f92672>=</span><span style=color:#e6db74>$&#39;\033[0m&#39;</span></span></span></code></pre></div></div><ul><li><p><code class=verbatim>export LESS</code>: alguns argumentos, cujo são:</p><ul><li><code class=verbatim>-F</code>: se der para "printar" todo o conteúdo na tela, printe e saia.</li><li><code class=verbatim>-R</code>: pegue as cores das saídas de comandos, como <code class=verbatim>ls</code>.</li><li><code class=verbatim>-J</code>: melhor barra de status.</li><li><code class=verbatim>-M</code>: barra de status mais "verbosa".</li><li><code class=verbatim>-X</code>: não limpe a tela ao sair.</li></ul></li><li><code class=verbatim>export LESSHISTFILE</code>: onde salvar o histórico, <code class=verbatim>/dev/null/</code> ou <code class=verbatim>-</code> para sem histórico.</li><li><code class=verbatim>export LESS_TERMCAP_*</code>: algumas cores para melhor legibilidade.</li></ul></div></div></div></div><div id=outline-container-headline-7 class=outline-2><h2 id=headline-7>Final</h2><div id=outline-text-headline-7 class=outline-text-2><p>Agora você tem em mãos um <code class=verbatim>ls</code> mais turbinado!</p><p>Assim, conteúdo que puder ser mostrado inteiramente na tela será printado normalmente:</p><p><a href=/static/images/faca-melhor-uso-do-comando-ls-1.png>ls-less-small-output</a></p><p>Se não, deixará você "paginar" o output, deixando inclusive usar comandos do <code class=verbatim>less</code> como busca:</p><p><a href=/static/images/faca-melhor-uso-do-comando-ls-2.png>ls-less-big-output</a></p></div></div></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2022 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=https://unixwmbr.github.io/assets/main.js></script>
<script src=https://unixwmbr.github.io/assets/prism.js></script></div></body></html>